<!DOCTYPE html>
<html>
<head>
	<title>MyEApp</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
	<script src="/public/javascript_files/filesUpload.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" ></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
	<script src="https://unpkg.com/js-datepicker"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<link rel="stylesheet" href="/resources/demos/style.css">
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="/public/css_files/addcss.css">
	<link rel="stylesheet" type="text/css" href="/public/css_files/eventForm.css">
	<link rel="stylesheet" href="https://unpkg.com/js-datepicker/datepicker.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/font-awesome/3.0.2/css/font-awesome.css" />
</head>
<body >
<div class="container-fluid">
	<nav class="navbar navbar-inverse colorwhite">
	<!-- Menu -->
	  	
		    <!-- Brand and toggle get grouped for better mobile display -->
		    <div class="navbar-header container-fluid">
			   	<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
			        <span class="sr-only">Toggle navigation</span>
			        <span class="colorwhite" >Menu</span>
		      	</button>
			    <a href="./index.html"><img id="userphoto" src="/public/images/jj.jpg" alt="..." class="img-circle xs">
				<label for="userphoto" class="userphotolabel">Corinti Johnson</label></a>
	    	</div>
	   		<!-- Collect the nav links, forms, and other content for toggling -->
		    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		      	<ul class="nav navbar-nav">
			        <li class="active"><a href="/"> <span class="sr-only"></span><i class="fa fa-home" aria-hidden="true"> </i> Home</a></li>
			        <li><a href="/userspage"><i class="fa fa-users" aria-hidden="true"></i> Users</a><span class="sr-only"></span>
			        </li>
			        <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
			        	<i class="fa fa-suitcase" aria-hidden="true"></i> My Events 
				        <span class="caret"></span></a>
				        <ul class="dropdown-menu">
					        <li><a href="/events">Events Page</a></li>
				        </ul>
			        </li>
		      	</ul>
		      	<ul class="nav navbar-nav navbar-right">
			       	<li class="rightNavMenu notifications" data-count="1"><a href="#"> <span class="sr-only "></span><i class="fa fa-bell" aria-hidden="true"> </i> Notifications</a></li>
			       	<li class="rightNavMenu"><a href="#"> <span class="sr-only"></span><i class="fa fa-envelope" aria-hidden="true"> </i> Messages</a></li>
			    </ul>
		    </div>
	</nav>
								<!-- Menu Elements -->
	
		<div class="row">	
			<div class="col-md-2 col-xs-2  getstart id="bs-example-navbar-collapse-1">
			 	<ul class="list-group">
				   	<li class="list-group-item">Users <span class="badge">12</span></li>
				   	<li class="list-group-item">Warnings <span class="badge">3</span></li>
			  	</ul>
				<div class="panel-group">
			    	<div class="panel panel-default">
			     		<div class="panel-heading fill-div">
				        	<p class="panel-title"><a data-toggle="collapse" href="#collapse1" class="fill-div">My Emails <span class="glyphicon glyphicon-envelope left"></span></a>
				        	</p>
			      		</div>
			      		<div id="collapse1" class="panel-collapse collapse">
			        		<div class="panel-footer">Salesforce</div>
			      		</div>
			    	</div>
			 	</div>
			</div>

			<div class="col-md-10 col-xs-10 getstartcase contentbody">
				<div class="col-sm-10 heightAdjust getstartcase" id="formEventInsert" ><h2>Add Events</h2>
		  			<div class="contact-section">
						<div class="container">
							<form>
								<div class="col-md-6 form-line">
						  			<div class="form-group">
						  				<label for="exampleInputUsername">Event Title</label>
								    	<input type="text" class="form-control" id="" placeholder=" Enter Name">
							  		</div>
							  		<div class="form-group">
								    	<label for="exampleInputEmail">Inquiries</label>
								    	<input type="email" class="form-control" id="exampleInputEmail" placeholder=" Enter Email id">
								  	</div>	
								  	<div class="form-group">
						                <div class='input-group date' id=''>
						                	<label for="date">Date</label>
						                    <input type='text' class="form-control" id="datepicker" placeholder="Pick the date">
						                    
						                </div>
						            </div>
								  	<div class="form-group">
								    	<label for="telephone">Time</label>
								    	<input type="tel" class="form-control" id="timepicker" placeholder=" Enter 10-digit mobile no.">
						  			</div>
						  			<div class="form-group">
								    	<label for="telephone">Location</label>
								    	<input type="tel" class="form-control" id="telephone" placeholder=" Enter 10-digit mobile no.">
						  			</div>
						  	
    							</div>
						  		<div class="col-md-6">
						  			<div class="form-group">
						  				<label for ="description"> Description</label>
						  			 	<textarea  class="form-control" id="description" placeholder="Enter Your Message"></textarea>
						  			</div>
						  			<div class="input-group">
						  				<div class="form-group"><label>Upload Image</label>
	        								<div class="input-group">
	            								<label class="input-group-btn">
	                							<span class="btn btn-primary btn-file">Browseâ€¦ <input type="file" id="imgInp" style="display:none;" multiple></label>
	            								</span>
	            								<input type="text" class="form-control" readonly>
	        								</div>
        									<div class="col-md-6">
        										<img id='img-upload'/>
        									</div>
    									</div>
    								</div>
    														  			
								</div>
							</form>
							<div>
				  				<button type="button" class="btn btn-success btn-md"><i class="fa fa-save" aria-hidden="true"></i> Save Event</button>
				  				<button type="button" class="btn btn-primary btn-md"><i class="fa fa-send" aria-hidden="true"></i> Save and Publish</button>
				  				<button type="button" class="btn btn-danger btn-md"><i class="fa fa-close" aria-hidden="true"></i> Cancel</button>
						  	</div>
						</div>
					</div>
				</div>					
				<div class="col-sm-2 getstartcase heightAdjust eventSidebar" id="tableUserInsert"><h2>All events</h2><p style="color: #ffeb00;">Participants per events</p>  
					<div class="">
					 	<ul class="list-group">
						   	<li class="list-group-item">Event 1<span class="badge success">Published</span></li>
						   	<li class="list-group-item">Event 2 <span class="badge saved">Saved</span></li>
						   	<li class="list-group-item">Event 3 <span class="badge saved">Saved</span></li>
					  	</ul>
					</div>
				</div>
		</div>		
	 	
	<script type="text/javascript">
	 	$(document).ready(function () {
		 	function displayUsers (data) {
                var tr;
                var iconsArray = ['fa-search', 'fa-toggle-up','fa fa-trash fa-1', 'fa-link','fa fa-pencil-square-o']
                $('table').find("tr:gt(0)").remove();
                    $('#userName').val('');
                    $('#email').val('');
                    $('#password').val('');
                for (var i = 0; i < data.responseJSON.length; i++) {
                    tr = $('<tr class="datas"/>');
                    trash = $('.trash');
                    tr.append('<td class="userName">' + data.responseJSON[i].userName + '</td>');
                    tr.append('<td>' + data.responseJSON[i].email + "</td>");
                    tr.append('<td><i id="trash" class="fa '+ iconsArray[2] +'"></i><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><i id="update" class="fa edit' + iconsArray[4] + '"></i></td>');
                    tr.click(function(){
                        // $('#userName').val($(this).find('td').eq(0).html());
                        // $('#email').val($(this).find('td').eq(1).html());
                    });
                    $('table').append(tr);
                }

                //Delete User

                $('td i').closest("tr").find('#trash').click(function(e){
                	e.preventDefault();	
                	var user = {
                    username:  $(this).closest("tr").find(".userName").text()
                	};  
                	console.log(user); 
	                	$.ajax({
	                    url: "/delete",
	                    type: "DELETE",
	                    contentType: "application/json",
	                    processData: false,
	                    data: JSON.stringify(user),
	                    complete: function () {                     
	                        $.ajax({
	                            url: "/users",
	                            type: "GET",
	                            contentType: "application/json",
	                            complete: displayUsers
	                        });
	                    }
	                });               
                });	

                //Update user
                 $('td i').closest("tr").find('#update').click(function(e){
                	e.preventDefault();	
                	var user = {
                    username:  $(this).closest("tr").find(".userName").text()
                	}; 
                	$('#userName').val(JSON.stringify(user));
                    $('#email').val($(tr).find('td').eq(1).html());            
                });
	        }

            $.ajax({
                url: "/users",
                type: "GET",
                contentType: "application/json",
                complete: displayUsers
            });

            // Submit button
            $('#user-submit').click(function(e){
                e.preventDefault();
                var user = {
                    userName:  $('#userName').val(),
                    email:      $('#email').val(),
                    password: $('#password').val()
                };  
                $.ajax({
                    url: "/users",
                    type: "POST",
                    contentType: "application/json",
                    processData: false,
                    data: JSON.stringify(user),
                    complete: function () {                     
                        $.ajax({
                            url: "/users",
                            type: "GET",
                            contentType: "application/json",
                            complete: displayUsers
                        });
                    }
                });
            });
            $('#clear_user').click(function () {
                // $.ajax({
                //     url: "/delete",
                //     type: "DELETE",
                //     contentType: "application/json",
                //     processData: false,
                //     success: function () {                     
                //         $.ajax({
                //             url: "/users",
                //             type: "GET",
                //             contentType: "application/json",
                //             complete: displayUsers
                //         });
                //     }
                // });
            });

            $('.timepicker').timepicker({
		    timeFormat: 'h:mm p',
		    interval: 60,
		    minTime: '10',
		    maxTime: '6:00pm',
		    defaultTime: '11',
		    startTime: '10:00',
		    dynamic: false,
		    dropdown: true,
		    scrollbar: true
			});
        });
	 </script>
</body>
</html>